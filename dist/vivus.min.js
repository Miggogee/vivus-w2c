!function(){"use strict";function e(t){if(void 0===t)throw new Error('Pathformer [constructor]: "element" parameter is required');if(t.constructor===String&&!(t=document.getElementById(t)))throw new Error('Pathformer [constructor]: "element" parameter is not related to an existing ID');if(!(t instanceof window.SVGElement||t instanceof window.SVGGElement||/^svg$/i.test(t.nodeName)))throw new Error('Pathformer [constructor]: "element" parameter must be a string or a SVGelement');this.el=t,this.scan(t)}var i,n,t,p;function r(t,e,n){i(),this.isReady=!1,this.setElement(t,e),this.setOptions(e),this.setCallback(n),this.isReady&&this.init()}e.prototype.TYPES=["line","ellipse","circle","polygon","polyline","rect"],e.prototype.ATTR_WATCH=["cx","cy","points","r","rx","ry","x","x1","x2","y","y1","y2"],e.prototype.scan=function(t){for(var e,n,i=t.querySelectorAll(this.TYPES.join(",")),r=0;r<i.length;r++)n=(0,this[(e=i[r]).tagName.toLowerCase()+"ToPath"])(this.parseAttr(e.attributes)),n=this.pathMaker(e,n),e.parentNode.replaceChild(n,e)},e.prototype.lineToPath=function(t){var e={},n=t.x1||0,i=t.y1||0,r=t.x2||0,t=t.y2||0;return e.d="M"+n+","+i+"L"+r+","+t,e},e.prototype.rectToPath=function(t){var e,n={},i=parseFloat(t.x)||0,r=parseFloat(t.y)||0,a=parseFloat(t.width)||0,s=parseFloat(t.height)||0;return t.rx||t.ry?(e=parseInt(t.rx,10)||-1,t=parseInt(t.ry,10)||-1,e=Math.min(Math.max(e<0?t:e,0),a/2),t=Math.min(Math.max(t<0?e:t,0),s/2),n.d="M "+(i+e)+","+r+" L "+(i+a-e)+","+r+" A "+e+","+t+",0,0,1,"+(i+a)+","+(r+t)+" L "+(i+a)+","+(r+s-t)+" A "+e+","+t+",0,0,1,"+(i+a-e)+","+(r+s)+" L "+(i+e)+","+(r+s)+" A "+e+","+t+",0,0,1,"+i+","+(r+s-t)+" L "+i+","+(r+t)+" A "+e+","+t+",0,0,1,"+(i+e)+","+r):n.d="M"+i+" "+r+" L"+(i+a)+" "+r+" L"+(i+a)+" "+(r+s)+" L"+i+" "+(r+s)+" Z",n},e.prototype.polylineToPath=function(t){var e,n={},i=t.points.trim().split(" ");if(-1===t.points.indexOf(",")){for(var r=[],a=0;a<i.length;a+=2)r.push(i[a]+","+i[a+1]);i=r}for(e="M"+i[0],a=1;a<i.length;a++)-1!==i[a].indexOf(",")&&(e+="L"+i[a]);return n.d=e,n},e.prototype.polygonToPath=function(t){t=e.prototype.polylineToPath(t);return t.d+="Z",t},e.prototype.ellipseToPath=function(t){var e={},n=parseFloat(t.rx)||0,i=parseFloat(t.ry)||0,r=parseFloat(t.cx)||0,t=parseFloat(t.cy)||0,a=r-n,s=t,r=parseFloat(r)+parseFloat(n);return e.d="M"+a+","+s+"A"+n+","+i+" 0,1,1 "+r+","+t+"A"+n+","+i+" 0,1,1 "+a+","+t,e},e.prototype.circleToPath=function(t){var e={},n=parseFloat(t.r)||0,i=parseFloat(t.cx)||0,t=parseFloat(t.cy)||0,r=i-n,a=t,i=parseFloat(i)+parseFloat(n);return e.d="M"+r+","+a+"A"+n+","+n+" 0,1,1 "+i+","+t+"A"+n+","+n+" 0,1,1 "+r+","+t,e},e.prototype.pathMaker=function(t,e){for(var n,i=document.createElementNS("http://www.w3.org/2000/svg","path"),r=0;r<t.attributes.length;r++)n=t.attributes[r],-1===this.ATTR_WATCH.indexOf(n.name)&&i.setAttribute(n.name,n.value);for(r in e)i.setAttribute(r,e[r]);return i},e.prototype.parseAttr=function(t){for(var e,n={},i=0;i<t.length;i++){if(e=t[i],-1!==this.ATTR_WATCH.indexOf(e.name)&&-1!==e.value.indexOf("%"))throw new Error("Pathformer [parseAttr]: a SVG shape got values in percentage. This cannot be transformed into 'path' tags. Please use 'viewBox'.");n[e.name]=e.value}return n},r.LINEAR=function(t){return t},r.EASE=function(t){return-Math.cos(t*Math.PI)/2+.5},r.EASE_OUT=function(t){return 1-Math.pow(1-t,3)},r.EASE_IN=function(t){return Math.pow(t,3)},r.EASE_OUT_BOUNCE=function(t){var e=1-Math.cos(t*(.5*Math.PI)),e=Math.pow(e,1.5),t=Math.pow(1-t,2);return 1-t+(1-Math.abs(Math.cos(e*(2.5*Math.PI))))*t},r.REPEAT_PASSES=function(t,e){return 0==t||e%2==1?e*t:e*t+1},r.prototype.setElement=function(e,n){var i,t,r;if(void 0===e)throw new Error('Vivus [constructor]: "element" parameter is required');if(e.constructor===String&&!(e=document.getElementById(e)))throw new Error('Vivus [constructor]: "element" parameter is not related to an existing ID');if(this.parentEl=e,n&&n.file)i=this,t=function(){var t=document.createElement("div"),t=(t.innerHTML=this.responseText,t.querySelector("svg"));if(!t)throw new Error("Vivus [load]: Cannot find the SVG in the loaded file : "+n.file);i.el=t,i.el.setAttribute("width","100%"),i.el.setAttribute("height","100%"),i.parentEl.appendChild(i.el),i.isReady=!0,i.init(),i=null},(r=new window.XMLHttpRequest).addEventListener("load",t),r.open("GET",n.file),r.send();else switch(e.constructor){case window.SVGSVGElement:case window.SVGElement:case window.SVGGElement:this.el=e,this.isReady=!0;break;case window.HTMLObjectElement:i=this,(t=function(t){if(!i.isReady){if(i.el=e.contentDocument&&e.contentDocument.querySelector("svg"),!i.el&&t)throw new Error("Vivus [constructor]: object loaded does not contain any SVG");i.el&&(e.getAttribute("built-by-vivus")&&(i.parentEl.insertBefore(i.el,e),i.parentEl.removeChild(e),i.el.setAttribute("width","100%"),i.el.setAttribute("height","100%")),i.isReady=!0,i.init(),i=null)}})()||e.addEventListener("load",t);break;default:throw new Error('Vivus [constructor]: "element" parameter is not valid (or miss the "file" attribute)')}},r.prototype.setOptions=function(t){var e=["delayed","sync","async","nsync","oneByOne","scenario","scenario-sync"],n=["inViewport","manual","autostart"];if(void 0!==t&&t.constructor!==Object)throw new Error('Vivus [constructor]: "options" parameter must be an object');if((t=t||{}).type&&-1===e.indexOf(t.type))throw new Error("Vivus [constructor]: "+t.type+" is not an existing animation `type`");if(this.type=t.type||e[0],t.start&&-1===n.indexOf(t.start))throw new Error("Vivus [constructor]: "+t.start+" is not an existing `start` option");if(this.start=t.start||n[0],this.isIE=-1!==window.navigator.userAgent.indexOf("MSIE")||-1!==window.navigator.userAgent.indexOf("Trident/")||-1!==window.navigator.userAgent.indexOf("Edge/"),this.duration=p(t.duration,120),this.delay=p(t.delay,null),this.dashGap=p(t.dashGap,1),this.forceRender=t.hasOwnProperty("forceRender")?!!t.forceRender:this.isIE,this.reverseStack=!!t.reverseStack,this.selfDestroy=!!t.selfDestroy,this.onReady=t.onReady,this.map=[],this.frameLength=this.currentFrame=this.delayUnit=this.speed=this.handle=null,this.ignoreInvisible=!!t.hasOwnProperty("ignoreInvisible")&&!!t.ignoreInvisible,this.animTimingFunction=t.animTimingFunction||r.LINEAR,this.pathTimingFunction=t.pathTimingFunction||r.LINEAR,this.delay>=this.duration)throw new Error("Vivus [constructor]: delay must be shorter than duration")},r.prototype.setCallback=function(t){if(t&&t.constructor!==Function)throw new Error('Vivus [constructor]: "callback" parameter must be a function');this.callback=t||function(){}},r.prototype.mapping=function(){var t,e,n,i,r=n=i=0,a=this.el.querySelectorAll("path");for(l=!1,t=0;t<a.length;t++){var s,o,h,l,c,u=a[t];this.isInvisible(u)||(c={el:u,length:0,startAt:0,duration:0,isResizeSensitive:!1},"non-scaling-stroke"===u.getAttribute("vector-effect")?(s=u.getBoundingClientRect(),h=(o=u.getBBox()).width||1,o=o.height||1,h=Math.max(s.width/h,s.height/o),l=c.isResizeSensitive=!0):h=1,c.length=Math.ceil(u.getTotalLength()*h),isNaN(c.length)?window.console&&console.warn&&console.warn("Vivus [mapping]: cannot retrieve a path element length",u):(this.map.push(c),u.style.strokeDasharray=c.length+" "+(c.length+2*this.dashGap),u.style.strokeDashoffset=c.length+this.dashGap,c.length+=this.dashGap,n+=c.length,this.renderPath(t)))}for(l&&console.warn("Vivus: this SVG contains non-scaling-strokes. You should call instance.recalc() when the SVG is resized or you will encounter unwanted behaviour. See https://github.com/maxwellito/vivus#non-scaling for more info."),n=0===n?1:n,this.delay=null===this.delay?this.duration/3:this.delay,this.delayUnit=this.delay/(1<a.length?a.length-1:1),this.reverseStack&&this.map.reverse(),t=0;t<this.map.length;t++){switch(c=this.map[t],this.type){case"delayed":c.startAt=this.delayUnit*t,c.duration=this.duration-this.delay;break;case"oneByOne":c.startAt=i/n*this.duration,c.duration=c.length/n*this.duration;break;case"sync":case"async":case"nsync":c.startAt=0,c.duration=this.duration;break;case"scenario-sync":u=c.el,e=this.parseAttr(u),c.startAt=r+(p(e["data-delay"],this.delayUnit)||0),c.duration=p(e["data-duration"],this.duration),c.passes=e.passes||1,r=void 0!==e["data-async"]?c.startAt:c.startAt+c.duration,this.frameLength=Math.max(this.frameLength,c.startAt+c.duration);break;case"scenario":u=c.el,e=this.parseAttr(u),c.startAt=p(e["data-start"],this.delayUnit)||0,c.duration=p(e["data-duration"],this.duration),c.passes=e.passes||1,this.frameLength=Math.max(this.frameLength,c.startAt+c.duration)}i+=c.length,this.frameLength=this.frameLength||this.duration}},r.prototype.recalc=function(){this.mustRecalcScale||(this.mustRecalcScale=n(function(){this.performLineRecalc()}.bind(this)))},r.prototype.performLineRecalc=function(){for(var t,e,n,i,r=0;r<this.map.length;r++)(t=this.map[r]).isResizeSensitive&&(i=(e=t.el).getBoundingClientRect(),n=e.getBBox(),i=Math.max(i.width/n.width,i.height/n.height),t.length=Math.ceil(e.getTotalLength()*i),e.style.strokeDasharray=t.length+" "+(t.length+2*this.dashGap));this.trace(),this.mustRecalcScale=null},r.prototype.draw=function(){var t=this;if(this.currentFrame+=this.speed,this.currentFrame<=0)this.stop(),this.reset();else{if(!(this.currentFrame>=this.frameLength))return this.trace(),void(this.handle=n(function(){t.draw()}));this.stop(),this.currentFrame=this.frameLength,this.trace(),this.selfDestroy&&this.destroy()}this.callback(this),this.instanceCallback&&(this.instanceCallback(this),this.instanceCallback=null)},r.prototype.trace=function(){for(var t,e,n=this.animTimingFunction(this.currentFrame/this.frameLength)*this.frameLength,i=0;i<this.map.length;i++)t=(n-(e=this.map[i]).startAt)/e.duration,t=this.pathTimingFunction(Math.max(0,Math.min(1,t)),e.passes||1),e.progress!==t&&(e.progress=t,e.el.style.strokeDashoffset=Math.floor(e.length*(1-t)),this.renderPath(i))},r.prototype.renderPath=function(t){var e;this.forceRender&&this.map&&this.map[t]&&(e=(t=this.map[t]).el.cloneNode(!0),t.el.parentNode.replaceChild(e,t.el),t.el=e)},r.prototype.init=function(){this.frameLength=0,this.currentFrame=0,this.map=[],new e(this.el),this.mapping(),this.starter(),this.onReady&&this.onReady(this)},r.prototype.starter=function(){switch(this.start){case"manual":return;case"autostart":this.play();break;case"inViewport":var t=this,e=function(){t.isInViewport(t.parentEl,1)&&(t.play(),window.removeEventListener("scroll",e))};window.addEventListener("scroll",e),e()}},r.prototype.getStatus=function(){return 0===this.currentFrame?"start":this.currentFrame===this.frameLength?"end":"progress"},r.prototype.reset=function(){return this.setFrameProgress(0)},r.prototype.finish=function(){return this.setFrameProgress(1)},r.prototype.setFrameProgress=function(t){return t=Math.min(1,Math.max(0,t)),this.currentFrame=Math.round(this.frameLength*t),this.trace(),this},r.prototype.play=function(t,e){if(this.instanceCallback=null,t&&"function"==typeof t)this.instanceCallback=t,t=null;else if(t&&"number"!=typeof t)throw new Error("Vivus [play]: invalid speed");return e&&"function"==typeof e&&!this.instanceCallback&&(this.instanceCallback=e),this.speed=t||1,this.handle||this.draw(),this},r.prototype.stop=function(){return this.handle&&(t(this.handle),this.handle=null),this},r.prototype.destroy=function(){var t,e;for(this.stop(),t=0;t<this.map.length;t++)(e=this.map[t]).el.style.strokeDashoffset=null,e.el.style.strokeDasharray=null,this.renderPath(t)},r.prototype.isInvisible=function(t){var e=t.getAttribute("data-ignore");return null!==e?"false"!==e:!!this.ignoreInvisible&&!(e=t.getBoundingClientRect()).width&&!e.height},r.prototype.parseAttr=function(t){var e,n={};if(t&&t.attributes)for(var i=0;i<t.attributes.length;i++)n[(e=t.attributes[i]).name]=e.value;return n},r.prototype.isInViewport=function(t,e){var n=this.scrollY(),i=n+this.getViewportH(),t=t.getBoundingClientRect(),r=t.height,t=n+t.top;return t+r*(e=e||0)<=i&&n<=t+r},r.prototype.getViewportH=function(){var t=this.docElem.clientHeight,e=window.innerHeight;return t<e?e:t},r.prototype.scrollY=function(){return window.pageYOffset||this.docElem.scrollTop},i=function(){r.prototype.docElem||(r.prototype.docElem=window.document.documentElement,n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return window.clearTimeout(t)})},p=function(t,e){t=parseInt(t,10);return 0<=t?t:e},"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof exports?module.exports=r:window.Vivus=r}();